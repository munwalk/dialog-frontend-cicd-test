<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/jpeg" href="static/images/dialog-logo.png" />
  <title>회의 중 - AI 회의록 서비스</title>
  <link rel="stylesheet" href="/static/css/style.css">
  <link rel="stylesheet" href="/static/css/recording.css">
  <link rel="stylesheet" href="static/css/chatbot.css">
</head>

<body>
  <div class="container">
    <!-- Sidebar Trigger Zone -->
    <div class="sidebar-trigger"></div>

    <!-- Sidebar -->
    <div id="sidebar-container"></div>

    <!-- Main Content -->
    <main class="main-content">
      <div id="recording" class="content-wrapper">

        <!-- 헤더 -->
        <div class="rcf-header">
          <div class="rcf-header-top">
            <div class="page-header">
              <div>
                <h2 class="meeting-title" id="meetingTitle">프로젝트 기획 회의</h2>
                <!-- 회의 설명 (있을 경우) -->
                <div id="meetingDescriptionWrapper"
                  style="display: none; margin-top: 12px; padding: 12px 16px; background: #f9fafb; border-left: 3px solid #8E44AD; border-radius: 8px;">
                  <p id="meetingDescription" style="color: #374151; font-size: 14px; line-height: 1.6; margin: 0;"></p>
                </div>
              </div>
            </div>

            <!-- 상단 우측: 회의 종료 버튼만 -->
            <div class="header-actions">
              <button class="control-btn end-btn" id="endBtn" disabled>
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="6" y="6" width="12" height="12" />
                </svg>
                회의 종료
              </button>
            </div>
          </div>

          <div class="meeting-meta">
            <div class="meta-item">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
                <line x1="16" y1="2" x2="16" y2="6" />
                <line x1="8" y1="2" x2="8" y2="6" />
                <line x1="3" y1="10" x2="21" y2="10" />
              </svg>
              <span id="meetingDate"></span>
            </div>
            <div class="meta-item">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                <circle cx="9" cy="7" r="4" />
                <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
                <path d="M16 3.13a4 4 0 0 1 0 7.75" />
              </svg>
              <span id="participantCount">3명 참석</span>
            </div>
          </div>
        </div>

        <!-- 메인 레이아웃 -->
        <div class="rf-main-wrapper">
          <!-- 좌측: 실시간 대화 로그 -->
          <div class="main-area">
            <div class="area-header">
              <h2 class="area-title">실시간 대화 기록</h2>
              <div class="area-meta">
                <span class="transcript-count" id="transcriptCount">0개 발화</span>
                <div class="auto-scroll-toggle">
                  <input type="checkbox" id="autoScroll" checked>
                  <label for="autoScroll">자동 스크롤</label>
                </div>
              </div>
            </div>

            <div class="transcript-area">
              <div class="transcript-list" id="transcriptContent">
                <!-- 발화 블록 동적 생성 -->
              </div>
            </div>
          </div>

          <!-- 우측: 사이드바 -->
          <div class="content-sidebar">
            <!-- 경과 시간 카드 -->
            <div class="sidebar-section timer-section">
              <div class="timer-header">
                <div class="timer-main">
                  <div class="timer-text" id="timerDisplay">00:00</div>
                </div>
                <div class="audio-visualizer">
                  <svg class="mic-icon-small" width="16" height="16" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2">
                    <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z" />
                    <path d="M19 10v2a7 7 0 0 1-14 0v-2" />
                    <line x1="12" y1="19" x2="12" y2="23" />
                    <line x1="8" y1="23" x2="16" y2="23" />
                  </svg>
                  <div class="audio-bars">
                    <span class="audio-bar"></span>
                    <span class="audio-bar"></span>
                    <span class="audio-bar"></span>
                    <span class="audio-bar"></span>
                    <span class="audio-bar"></span>
                  </div>
                </div>
              </div>

              <!-- 녹음 컨트롤 버튼 -->
              <div class="timer-controls">
                <button class="control-btn start-btn" id="startBtn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10" />
                    <polygon points="10 8 16 12 10 16 10 8" />
                  </svg>
                  녹음 시작
                </button>
                <button class="control-btn pause-btn" id="pauseBtn" style="display: none;">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="6" y="4" width="4" height="16" />
                    <rect x="14" y="4" width="4" height="16" />
                  </svg>
                  일시정지
                </button>
              </div>
            </div>

            <!-- 참석자 카드 -->
            <div class="sidebar-section">
              <h3 class="sidebar-title">참석자</h3>
              <div class="participants-grid" id="participantsList">
                <!-- 동적 생성 -->
              </div>
            </div>

            <!-- 키워드 카드 -->
            <div class="sidebar-section">
              <h3 class="sidebar-title">하이라이트 키워드</h3>
              <div class="keywords-display" id="keywordsList">
                <!-- 동적 생성 -->
              </div>
            </div>
          </div>
        </div>

        <!-- 하이라이트 알림 -->
        <div id="highlightToastContainer" class="highlight-toast-container"></div>

        <!-- 챗봇 컨테이너 -->
        <div id="chatbot-container"></div>

        <!-- 플로팅 버튼 -->
        <button class="floating-chat-btn" id="floatingChatBtn">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" />
          </svg>
        </button>
      </div>

    </main>
  </div>

  <!-- 커스텀 확인 모달 -->
  <div id="confirmModal" class="custom-modal hidden">
    <div class="custom-modal-content">
      <h3 id="confirmTitle">회의 종료</h3>
      <p id="confirmMessage">회의를 종료하시겠습니까?<br>종료하면 회의록 페이지로 이동합니다.</p>
      <div class="custom-modal-buttons">
        <button id="confirmCancelBtn" class="btn-cancel">취소</button>
        <button id="confirmOkBtn" class="btn-ok">확인</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="/static/js/app.js"></script>
  <script src="/static/js/lib/jspdf.umd.min.js"></script>
  <script src="/static/js/recording.js"></script>
  <script src="static/js/chatbot.js"></script>
</body>

</html>